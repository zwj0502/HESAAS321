{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\src\\permission.js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\src\\permission.js","mtime":1666142552601},{"path":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\babel.config.js","mtime":1663904824000},{"path":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1661678001124},{"path":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\node_modules\\babel-loader\\lib\\index.js","mtime":1663928692628},{"path":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\node_modules\\eslint-loader\\index.js","mtime":1661678032878}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiQzovVXNlcnMvQWRtaW5pc3RyYXRvci9EZXNrdG9wL2hyc2FhcygxKS9ocnNhYXMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3JlZ2VuZXJhdG9yUnVudGltZS5qcyI7CmltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSAiQzovVXNlcnMvQWRtaW5pc3RyYXRvci9EZXNrdG9wL2hyc2FhcygxKS9ocnNhYXMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5LmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL0FkbWluaXN0cmF0b3IvRGVza3RvcC9ocnNhYXMoMSkvaHJzYWFzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0IHJvdXRlciBmcm9tICdAL3JvdXRlcic7CmltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlJzsKaW1wb3J0IHsgYXN5bmNSb3V0ZXMgfSBmcm9tICdAL3JvdXRlcic7CnZhciB3aGV0ZWVsaXN0ID0gWycvbG9naW4nLCAnLzQwNCddOyAvLyDku7vkvZXkuIDkuKrot6/nlLHot7Povawg6YO95Lya6L+b5YWl6L+Z5Liq5YWo5bGA5YmN572u5a6I5Y2rCgpyb3V0ZXIuYmVmb3JlRWFjaCggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSh0bywgZnJvbSwgbmV4dCkgewogICAgdmFyIHJvbGVzLCBmaWx0ZXJhc3luY1JvdXRlczsKICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgaWYgKCFzdG9yZS5nZXR0ZXJzLnRva2VuKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE1OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoc3RvcmUuZ2V0dGVycy51c2VySWQpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ3VzZXIvZ2V0VXNlcmluZm8nKTsKCiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIHJvbGVzID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgY29uc29sZS5sb2cocm9sZXMpOwogICAgICAgICAgICBjb25zb2xlLmxvZyhhc3luY1JvdXRlcyk7CiAgICAgICAgICAgIGZpbHRlcmFzeW5jUm91dGVzID0gYXN5bmNSb3V0ZXMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJvbGVzLm1lbnVzLmluY2x1ZGVzKGl0ZW0ubWVhdC5pZCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjb25zb2xlLmxvZyhmaWx0ZXJhc3luY1JvdXRlcyk7CiAgICAgICAgICAgIHJvdXRlci5hZGRSb3V0ZXMoW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShmaWx0ZXJhc3luY1JvdXRlcyksIFt7CiAgICAgICAgICAgICAgcGF0aDogJyonLAogICAgICAgICAgICAgIHJlZGlyZWN0OiAnLzQwNCcsCiAgICAgICAgICAgICAgaGlkZGVuOiB0cnVlCiAgICAgICAgICAgIH1dKSk7CiAgICAgICAgICAgIHN0b3JlLmNvbW1pdCgncGVybWlzc2lvbi9zZXRSb3V0ZXMnLCBmaWx0ZXJhc3luY1JvdXRlcyk7CiAgICAgICAgICAgIG5leHQodG8ucGF0aCk7CgogICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgaWYgKHRvLnBhdGggPT09ICcvbG9naW4nKSB7CiAgICAgICAgICAgICAgbmV4dCgnLycpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE2OwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICBpZiAod2hldGVlbGlzdC5pbmNsdWRlcyh0by5wYXRoKSkgewogICAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBuZXh0KCcvbG9naW4nKTsKICAgICAgICAgICAgfQoKICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZSk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gKF94LCBfeDIsIF94MykgewogICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCkpOw=="},{"version":3,"names":["router","store","asyncRoutes","wheteelist","beforeEach","to","from","next","getters","token","userId","dispatch","roles","console","log","filterasyncRoutes","filter","item","menus","includes","meat","id","addRoutes","path","redirect","hidden","commit"],"sources":["C:/Users/Administrator/Desktop/hrsaas(1)/hrsaas/src/permission.js"],"sourcesContent":["import router from '@/router'\r\nimport store from '@/store'\r\nimport { asyncRoutes } from '@/router'\r\nconst wheteelist = ['/login', '/404']\r\n// 任何一个路由跳转 都会进入这个全局前置守卫\r\nrouter.beforeEach(async(to, from, next) => {\r\n  // ...\r\n  // to 将要进入的目标\r\n  // from 当前导航正要离开的路由\r\n  // next  Function\r\n  // next() 意味着都 当前这个钩子 结束 进入下一个\r\n  // next(false) 中断当前的导航\r\n  // next('/') 或者 next({ path: '/' })  跳转到一个不同的地址\r\n  //  当前的导航被中断，然后进行一个新的导航\r\n  if (store.getters.token) {\r\n    if (!store.getters.userId) {\r\n      const roles = await store.dispatch('user/getUserinfo')\r\n      console.log(roles)\r\n      console.log(asyncRoutes)\r\n      const filterasyncRoutes = asyncRoutes.filter(item => {\r\n        return roles.menus.includes(item.meat.id)\r\n      })\r\n      console.log(filterasyncRoutes)\r\n\r\n      router.addRoutes([...filterasyncRoutes, { path: '*', redirect: '/404', hidden: true }])\r\n      store.commit('permission/setRoutes', filterasyncRoutes)\r\n      next(to.path)\r\n    }\r\n    if (to.path === '/login') {\r\n      next('/')\r\n    } else {\r\n      next()\r\n    }\r\n  } else {\r\n    if (wheteelist.includes(to.path)) {\r\n      next()\r\n    } else {\r\n      next('/login')\r\n    }\r\n  }\r\n})\r\n"],"mappings":";;;;;;;;AAAA,OAAOA,MAAP,MAAmB,UAAnB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,SAASC,WAAT,QAA4B,UAA5B;AACA,IAAMC,UAAU,GAAG,CAAC,QAAD,EAAW,MAAX,CAAnB,C,CACA;;AACAH,MAAM,CAACI,UAAP;EAAA,sEAAkB,iBAAMC,EAAN,EAAUC,IAAV,EAAgBC,IAAhB;IAAA;IAAA;MAAA;QAAA;UAAA;YAAA,KASZN,KAAK,CAACO,OAAN,CAAcC,KATF;cAAA;cAAA;YAAA;;YAAA,IAUTR,KAAK,CAACO,OAAN,CAAcE,MAVL;cAAA;cAAA;YAAA;;YAAA;YAAA,OAWQT,KAAK,CAACU,QAAN,CAAe,kBAAf,CAXR;;UAAA;YAWNC,KAXM;YAYZC,OAAO,CAACC,GAAR,CAAYF,KAAZ;YACAC,OAAO,CAACC,GAAR,CAAYZ,WAAZ;YACMa,iBAdM,GAccb,WAAW,CAACc,MAAZ,CAAmB,UAAAC,IAAI,EAAI;cACnD,OAAOL,KAAK,CAACM,KAAN,CAAYC,QAAZ,CAAqBF,IAAI,CAACG,IAAL,CAAUC,EAA/B,CAAP;YACD,CAFyB,CAdd;YAiBZR,OAAO,CAACC,GAAR,CAAYC,iBAAZ;YAEAf,MAAM,CAACsB,SAAP,8BAAqBP,iBAArB,IAAwC;cAAEQ,IAAI,EAAE,GAAR;cAAaC,QAAQ,EAAE,MAAvB;cAA+BC,MAAM,EAAE;YAAvC,CAAxC;YACAxB,KAAK,CAACyB,MAAN,CAAa,sBAAb,EAAqCX,iBAArC;YACAR,IAAI,CAACF,EAAE,CAACkB,IAAJ,CAAJ;;UArBY;YAuBd,IAAIlB,EAAE,CAACkB,IAAH,KAAY,QAAhB,EAA0B;cACxBhB,IAAI,CAAC,GAAD,CAAJ;YACD,CAFD,MAEO;cACLA,IAAI;YACL;;YA3Ba;YAAA;;UAAA;YA6Bd,IAAIJ,UAAU,CAACgB,QAAX,CAAoBd,EAAE,CAACkB,IAAvB,CAAJ,EAAkC;cAChChB,IAAI;YACL,CAFD,MAEO;cACLA,IAAI,CAAC,QAAD,CAAJ;YACD;;UAjCa;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAAlB;;EAAA;IAAA;EAAA;AAAA"}]}