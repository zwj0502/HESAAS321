{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\src\\views\\import\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\src\\views\\import\\index.vue","mtime":1665884896764},{"path":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\babel.config.js","mtime":1663904824000},{"path":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1661678001124},{"path":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\node_modules\\babel-loader\\lib\\index.js","mtime":1663928692628},{"path":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1661678001124},{"path":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\node_modules\\vue-loader\\lib\\index.js","mtime":1664288167520}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiQzovVXNlcnMvQWRtaW5pc3RyYXRvci9EZXNrdG9wL2hyc2FhcygxKS9ocnNhYXMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3JlZ2VuZXJhdG9yUnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJDOi9Vc2Vycy9BZG1pbmlzdHJhdG9yL0Rlc2t0b3AvaHJzYWFzKDEpL2hyc2Fhcy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IFVwbG9hZEV4Y2VsIGZyb20gJ0AvY29tcG9uZW50cy9VcGxvYWRFeGNlbCc7CmltcG9ydCB7IGltcG9ydEVtcGxveWVlIH0gZnJvbSAnQC9hcGkvZW1wbG95ZWVzJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdIcnNhYXNJbmRleCcsCiAgY29tcG9uZW50czogewogICAgVXBsb2FkRXhjZWw6IFVwbG9hZEV4Y2VsCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHt9OwogIH0sCiAgLy8gaGVhZGVyICBbJ+aJi+acuuWPtycsICflp5PlkI0nLCAn5YWl6IGM5pel5pyfJywgJ+i9rOato+aXpeacnycsICflt6Xlj7cnXQogIC8vIHJlc3VsdHMgIFt7ICflhaXogYzml6XmnJ8nOiA0MzY3OCwgJ+Wnk+WQjSc6ICfpq5jlpKflsbEnLCAn5bel5Y+3JzogMjAwODksICfmiYvmnLrlj7cnOiAxMzA0MTEzMTg3OSwgJ+i9rOato+aXpeacnyc6IDQzNjc4IH1dCiAgLy8g5ZCO56uv5o6l5Y+j6KaB55qE5pWw5o2u77yaW3sgJ3RpbWVPZkVudHJ5JzogNDM2NzgsICd1c2VybmFtZSc6ICfpq5jlpKflsbEnLCAnd29ya051bWJlcic6IDIwMDg5LCAnbW9iaWxlJzogMTMwNDExMzE4NzksICdjb3JyZWN0aW9uVGltZSc6IDQzNjc4IH1dCiAgLy8g5a6e546w5om56YeP5paw5aKe5ZGY5belCiAgbWV0aG9kczogewogICAgaGFuZGxlU3VjY2VzczogZnVuY3Rpb24gaGFuZGxlU3VjY2VzcyhfcmVmKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBoZWFkZXIsIHJlc3VsdHMsIHVzZXJSZWxhdGlvbnMsIGFycjsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBoZWFkZXIgPSBfcmVmLmhlYWRlciwgcmVzdWx0cyA9IF9yZWYucmVzdWx0czsKICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGhlYWRlciwgcmVzdWx0cykKICAgICAgICAgICAgICAgIHVzZXJSZWxhdGlvbnMgPSB7CiAgICAgICAgICAgICAgICAgICflhaXogYzml6XmnJ8nOiAndGltZU9mRW50cnknLAogICAgICAgICAgICAgICAgICAn5omL5py65Y+3JzogJ21vYmlsZScsCiAgICAgICAgICAgICAgICAgICflp5PlkI0nOiAndXNlcm5hbWUnLAogICAgICAgICAgICAgICAgICAn6L2s5q2j5pel5pyfJzogJ2NvcnJlY3Rpb25UaW1lJywKICAgICAgICAgICAgICAgICAgJ+W3peWPtyc6ICd3b3JrTnVtYmVyJwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGFyciA9IFtdOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0cy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGl0ZW0pIC8vIHsgJ+WFpeiBjOaXpeacnyc6IDQzNjc4LCAn5aeT5ZCNJzogJ+mrmOWkp+WxsScsICflt6Xlj7cnOiAyMDA4OSwgJ+aJi+acuuWPtyc6IDEzMDQxMTMxODc5LCAn6L2s5q2j5pel5pyfJzogNDM2NzggfQogICAgICAgICAgICAgICAgICB2YXIgdXNlcmluZm8gPSB7fTsgLy8gIE9iamVjdC5rZXlzKGl0ZW0pIC8vIFsn5YWl6IGM5pel5pyfJywgJ+Wnk+WQjScsICflt6Xlj7cnLCfmiYvmnLrlj7cnLCAgXQoKICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoaXRlbSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICAgICAgICAgICAgLy8ga2V5IOS4reaWhwogICAgICAgICAgICAgICAgICAgIC8vIHVzZXJSZWxhdGlvbnNba2V5XSDoi7HmlocKICAgICAgICAgICAgICAgICAgICAvLyB1c2VyaW5mby50aW1lT2ZFbnRyeQogICAgICAgICAgICAgICAgICAgIC8vIGtleSDlr7nlupTnmoTlgLwgaXRlbVtrZXldCiAgICAgICAgICAgICAgICAgICAgdXNlcmluZm9bdXNlclJlbGF0aW9uc1trZXldXSA9IGl0ZW1ba2V5XTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIGFyci5wdXNoKHVzZXJpbmZvKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhhcnIpOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDg7CiAgICAgICAgICAgICAgICByZXR1cm4gaW1wb3J0RW1wbG95ZWUoYXJyKTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgX3RoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5a+85YWl5oiQ5YqfJyk7CgogICAgICAgICAgICAgICAgX3RoaXMuJHJvdXRlci5iYWNrKCk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;AAOA;AACA;AACA;EACAA,mBADA;EAEAC;IACAC;EADA,CAFA;EAKAC,IALA,kBAKA;IACA;EAGA,CATA;EAUA;EACA;EAEA;EAEA;EACAC;IACAC,aADA,+BACA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAAC;gBACA;gBACAC,aAFA,GAEA;kBACA,qBADA;kBAEA,eAFA;kBAGA,gBAHA;kBAIA,wBAJA;kBAKA;gBALA,CAFA;gBAUAC,GAVA,GAUA,EAVA;gBAAA;gBAAA,OAWAC;kBACA;kBACA,kBAFA,CAGA;;kBACAC;oBACA;oBACA;oBACA;oBACA;oBACAC;kBACA,CANA;kBAOAH;gBACA,CAZA,CAXA;;cAAA;gBAwBAI;gBAxBA;gBAAA,OAyBAC,mBAzBA;;cAAA;gBA0BA;;gBACA;;cA3BA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IA4BA;EA7BA;AAhBA","names":["name","components","UploadExcel","data","methods","handleSuccess","header","userRelations","arr","results","Object","userinfo","console","importEmployee"],"sourceRoot":"src/views/import","sources":["index.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <UploadExcel :on-success=\"handleSuccess\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport UploadExcel from '@/components/UploadExcel'\r\nimport { importEmployee } from '@/api/employees'\r\nexport default {\r\n  name: 'HrsaasIndex',\r\n  components: {\r\n    UploadExcel\r\n  },\r\n  data() {\r\n    return {\r\n\r\n    }\r\n  },\r\n  // header  ['手机号', '姓名', '入职日期', '转正日期', '工号']\r\n  // results  [{ '入职日期': 43678, '姓名': '高大山', '工号': 20089, '手机号': 13041131879, '转正日期': 43678 }]\r\n\r\n  // 后端接口要的数据：[{ 'timeOfEntry': 43678, 'username': '高大山', 'workNumber': 20089, 'mobile': 13041131879, 'correctionTime': 43678 }]\r\n\r\n  // 实现批量新增员工\r\n  methods: {\r\n    async  handleSuccess({ header, results }) {\r\n      // console.log(header, results)\r\n      const userRelations = {\r\n        '入职日期': 'timeOfEntry',\r\n        '手机号': 'mobile',\r\n        '姓名': 'username',\r\n        '转正日期': 'correctionTime',\r\n        '工号': 'workNumber'\r\n      }\r\n\r\n      const arr = []\r\n      await results.forEach(item => {\r\n        // console.log(item) // { '入职日期': 43678, '姓名': '高大山', '工号': 20089, '手机号': 13041131879, '转正日期': 43678 }\r\n        const userinfo = {}\r\n        //  Object.keys(item) // ['入职日期', '姓名', '工号','手机号',  ]\r\n        Object.keys(item).forEach(key => {\r\n          // key 中文\r\n          // userRelations[key] 英文\r\n          // userinfo.timeOfEntry\r\n          // key 对应的值 item[key]\r\n          userinfo[userRelations[key]] = item[key]\r\n        })\r\n        arr.push(userinfo)\r\n      })\r\n      console.log(arr)\r\n      await importEmployee(arr)\r\n      this.$message.success('导入成功')\r\n      this.$router.back()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n  <style lang=\"scss\" scoped>\r\n\r\n  </style>\r\n"]}]}