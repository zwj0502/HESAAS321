{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\src\\components\\UploadImg\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\src\\components\\UploadImg\\index.vue","mtime":1665807452772},{"path":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\babel.config.js","mtime":1663904824000},{"path":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1661678001124},{"path":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\node_modules\\babel-loader\\lib\\index.js","mtime":1663928692628},{"path":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1661678001124},{"path":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\node_modules\\vue-loader\\lib\\index.js","mtime":1664288167520}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5qc29uLnN0cmluZ2lmeS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vIHZhciBDT1MgPSByZXF1aXJlKCdjb3MtanMtc2RrLXY1JykKaW1wb3J0IENPUyBmcm9tICdjb3MtanMtc2RrLXY1JzsKY29uc29sZS5sb2coQ09TKTsKdmFyIGNvcyA9IG5ldyBDT1MoewogIFNlY3JldElkOiAnQUtJRGdHaUt0SFRVSHFDTk44ZzJFRkRGUFZlbHlGWGtqVTNPJywKICBTZWNyZXRLZXk6ICdNZXFGcEdZaWZibW9sY1E2ZTNESUR3U2tybmJFZHF0bCcKfSk7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnVXBsb2FkSW1nJywKICBwcm9wczogewogICAgdXNlckluZm9waG90bzogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiAnJzsKICAgICAgfQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8vIOS4iuS8oOeahOaWh+S7tuWIl+ihqCwKICAgICAgZmlsZUxpc3Q6IFtdLAogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgVXBsb2FkSW1ndXJsOiAnJywKICAgICAgbG9hZGluZzogZmFsc2UKICAgIH07CiAgfSwKICB3YXRjaDogewogICAgdXNlckluZm9waG90bzogZnVuY3Rpb24gdXNlckluZm9waG90bygpIHsKICAgICAgdGhpcy5maWxlTGlzdC5wdXNoKHsKICAgICAgICBuYW1lOiAnZGVmYXVsdCcsCiAgICAgICAgdXJsOiB0aGlzLnVzZXJJbmZvcGhvdG8KICAgICAgfSk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBvblByZXZpZXc6IGZ1bmN0aW9uIG9uUHJldmlldyhmaWxlKSB7CiAgICAgIHRoaXMuVXBsb2FkSW1ndXJsID0gZmlsZS51cmw7CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7IC8vICAgY29uc29sZS5sb2coJ+eCueWHu+mihOiniCcpCiAgICB9LAogICAgb25SZW1vdmU6IGZ1bmN0aW9uIG9uUmVtb3ZlKGZpbGUsIGZpbGVMaXN0KSB7CiAgICAgIHRoaXMuZmlsZUxpc3QgPSBmaWxlTGlzdDsKICAgIH0sCiAgICAvLyDmlofku7bnirbmgIHmlLnlj5jml7bnmoTpkqnlrZDvvIzmt7vliqDmlofku7bjgIHkuIrkvKDmiJDlip/lkozkuIrkvKDlpLHotKXml7bpg73kvJrooqvosIPnlKgKICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShmaWxlLCBmaWxlTGlzdCkgewogICAgICBjb25zb2xlLmxvZyhmaWxlKTsKICAgICAgdGhpcy5maWxlTGlzdCA9IGZpbGVMaXN0OwogICAgfSwKICAgIC8vIOimhueblum7mOiupOeahOS4iuS8oOihjOS4uu+8jOWPr+S7peiHquWumuS5ieS4iuS8oOeahOWunueOsAogICAgaHR0cFJlcXVlc3Q6IGZ1bmN0aW9uIGh0dHBSZXF1ZXN0KF9yZWYpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBmaWxlID0gX3JlZi5maWxlOwogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICBjb3MucHV0T2JqZWN0KHsKICAgICAgICBCdWNrZXQ6ICdoei16d2otMTMwNDI2ODQ4NCcsCgogICAgICAgIC8qIOWhq+WFpeaCqOiHquW3seeahOWtmOWCqOahtu+8jOW/hemhu+Wtl+autSAqLwogICAgICAgIFJlZ2lvbjogJ2FwLXNoYW5naGFpJywKCiAgICAgICAgLyog5a2Y5YKo5qG25omA5Zyo5Zyw5Z+f77yM5L6L5aaCYXAtYmVpamluZ++8jOW/hemhu+Wtl+autSAqLwogICAgICAgIEtleTogZmlsZS5uYW1lLAoKICAgICAgICAvKiDlrZjlgqjlnKjmobbph4znmoTlr7nosaHplK7vvIjkvovlpoIxLmpwZ++8jGEvYi90ZXN0LnR4dO+8ie+8jOW/hemhu+Wtl+autSAqLwogICAgICAgIEJvZHk6IGZpbGUsCgogICAgICAgIC8qIOW/hemhu++8jOS4iuS8oOaWh+S7tuWvueixoe+8jOWPr+S7peaYr2lucHV0W3R5cGU9ImZpbGUiXeagh+etvumAieaLqeacrOWcsOaWh+S7tuWQjuW+l+WIsOeahGZpbGXlr7nosaEgKi8KICAgICAgICBvblByb2dyZXNzOiBmdW5jdGlvbiBvblByb2dyZXNzKHByb2dyZXNzRGF0YSkgewogICAgICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkocHJvZ3Jlc3NEYXRhKSk7CiAgICAgICAgfQogICAgICB9LCBmdW5jdGlvbiAoZXJyLCBkYXRhKSB7CiAgICAgICAgLy8gY29uc29sZS5sb2coZXJyIHx8IGRhdGEpCiAgICAgICAgaWYgKGVycikgcmV0dXJuIF90aGlzLiRtZXNzYWdlLmVycm9yKGVycik7CiAgICAgICAgX3RoaXMubG9hZGluZyA9IGZhbHNlOyAvLyB0aGlzLmRhdGEKCiAgICAgICAgY29uc29sZS5sb2coJ2h0dHA6Ly8nICsgZGF0YS5Mb2NhdGlvbik7CgogICAgICAgIF90aGlzLiRlbWl0KCdvblBhZ2VpbWcnLCB7CiAgICAgICAgICBpbWdVcmw6ICdodHRwOi8vJyArIGRhdGEuTG9jYXRpb24KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgYmVmb3JlVXBsb2FkOiBmdW5jdGlvbiBiZWZvcmVVcGxvYWQoZmlsZSkgewogICAgICB2YXIgdHlwZXMgPSBbJ2ltYWdlL2pwZWcnLCAnaW1hZ2UvcG5nJ107IC8vICAgY29uc29sZS5sb2coZmlsZSkKCiAgICAgIHZhciBpc2hhcyA9IHR5cGVzLmluY2x1ZGVzKGZpbGUudHlwZSk7CgogICAgICBpZiAoIWlzaGFzKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5Y+q6IO95LiK5LygJyArIHR5cGVzLmpvaW4oJywnKSArICfnsbvlnovnmoTlm77niYcnKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0gLy8gICBpZiAoIXR5cGVzLmluY2x1ZGVzKGl0ZW0gPT4gaXRlbSA9PT0gZmlsZS50eXBlKSkgewogICAgICAvLyAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5Y+q6IO95LiK5LygJyArIHR5cGVzLmpvaW4oJywnKSArICfnsbvlnovnmoTlm77niYcnKQogICAgICAvLyAgICAgcmV0dXJuIGZhbHNlCiAgICAgIC8vICAgfQoKCiAgICAgIHZhciBNYXhTaXplID0gMSAqIDEwMjQgKiAxMDI0OwoKICAgICAgaWYgKGZpbGUuc2l6ZSA+IE1heFNpemUpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCflm77niYflpKflsI/kuI3og73otoXov4cxTScpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;AACA;AACAA;AACA;EACAC,gDADA;EAEAC;AAFA;AAIA;EACAC,iBADA;EAEAC;IACAC;MACAC,YADA;MAEAC;QAAA;MAAA;IAFA;EADA,CAFA;EAQAC,IARA,kBAQA;IACA;MACA;MACAC,YAFA;MAKAC,oBALA;MAMAC,gBANA;MAOAC;IAPA;EASA,CAlBA;EAmBAC;IACAR,aADA,2BACA;MACA,mBACA;QAAAF;QAAAW;MAAA,CADA;IAGA;EALA,CAnBA;EA0BAC;IACAC,SADA,qBACAC,IADA,EACA;MACA;MACA,0BAFA,CAGA;IACA,CALA;IAMAC,QANA,oBAMAD,IANA,EAMAR,QANA,EAMA;MACA;IACA,CARA;IASA;IACAU,QAVA,oBAUAF,IAVA,EAUAR,QAVA,EAUA;MACAT;MACA;IACA,CAbA;IAcA;IACAoB,WAfA,6BAeA;MAAA;;MAAA;MACA;MACAC;QACAC,2BADA;;QACA;QACAC,qBAFA;;QAEA;QACAC,cAHA;;QAGA;QACAC,UAJA;;QAIA;QACAC;UACA1B;QACA;MAPA,GAQA;QACA;QACA;QACA,sBAHA,CAKA;;QACAA;;QACA;UACA2B;QADA;MAGA,CAlBA;IAmBA,CApCA;IAqCAC,YArCA,wBAqCAX,IArCA,EAqCA;MACA,wCADA,CAEA;;MACA;;MACA;QACA;QACA;MACA,CAPA,CAQA;MACA;MACA;MACA;;;MACA;;MACA;QACA;QACA;MACA;IACA;EAtDA;AA1BA","names":["console","SecretId","SecretKey","name","props","userInfophoto","type","default","data","fileList","dialogVisible","UploadImgurl","loading","watch","url","methods","onPreview","file","onRemove","onChange","httpRequest","cos","Bucket","Region","Key","Body","onProgress","imgUrl","beforeUpload"],"sourceRoot":"src/components/UploadImg","sources":["index.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <el-upload\r\n      v-loading=\"loading\"\r\n      action=\"#\"\r\n      class=\"styleUploadImg\"\r\n      list-type=\"picture-card\"\r\n      :on-preview=\"onPreview\"\r\n      :on-remove=\"onRemove\"\r\n      :file-list=\"fileList\"\r\n      :on-change=\"onChange\"\r\n      :http-request=\"httpRequest\"\r\n      :limit=\"1\"\r\n      :before-upload=\"beforeUpload\"\r\n    >\r\n      <i class=\"el-icon-plus\" />\r\n    </el-upload>\r\n    <el-dialog\r\n      title=\"图片预览\"\r\n      :visible.sync=\"dialogVisible\"\r\n      width=\"50%\"\r\n    >\r\n      <img style=\"width:100%\" :src=\"UploadImgurl\" alt=\"\">\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// var COS = require('cos-js-sdk-v5')\r\nimport COS from 'cos-js-sdk-v5'\r\nconsole.log(COS)\r\nconst cos = new COS({\r\n  SecretId: 'AKIDgGiKtHTUHqCNN8g2EFDFPVelyFXkjU3O',\r\n  SecretKey: 'MeqFpGYifbmolcQ6e3DIDwSkrnbEdqtl'\r\n})\r\nexport default {\r\n  name: 'UploadImg',\r\n  props: {\r\n    userInfophoto: {\r\n      type: String,\r\n      default: () => ''\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      // 上传的文件列表,\r\n      fileList: [\r\n\r\n      ],\r\n      dialogVisible: false,\r\n      UploadImgurl: '',\r\n      loading: false\r\n    }\r\n  },\r\n  watch: {\r\n    userInfophoto() {\r\n      this.fileList.push(\r\n        { name: 'default', url: this.userInfophoto }\r\n      )\r\n    }\r\n  },\r\n  methods: {\r\n    onPreview(file) {\r\n      this.UploadImgurl = file.url\r\n      this.dialogVisible = true\r\n    //   console.log('点击预览')\r\n    },\r\n    onRemove(file, fileList) {\r\n      this.fileList = fileList\r\n    },\r\n    // 文件状态改变时的钩子，添加文件、上传成功和上传失败时都会被调用\r\n    onChange(file, fileList) {\r\n      console.log(file)\r\n      this.fileList = fileList\r\n    },\r\n    // 覆盖默认的上传行为，可以自定义上传的实现\r\n    httpRequest({ file }) {\r\n      this.loading = true\r\n      cos.putObject({\r\n        Bucket: 'hz-zwj-1304268484', /* 填入您自己的存储桶，必须字段 */\r\n        Region: 'ap-shanghai', /* 存储桶所在地域，例如ap-beijing，必须字段 */\r\n        Key: file.name, /* 存储在桶里的对象键（例如1.jpg，a/b/test.txt），必须字段 */\r\n        Body: file, /* 必须，上传文件对象，可以是input[type=\"file\"]标签选择本地文件后得到的file对象 */\r\n        onProgress: function(progressData) {\r\n          console.log(JSON.stringify(progressData))\r\n        }\r\n      }, (err, data) => {\r\n        // console.log(err || data)\r\n        if (err) return this.$message.error(err)\r\n        this.loading = false\r\n\r\n        // this.data\r\n        console.log('http://' + data.Location)\r\n        this.$emit('onPageimg', {\r\n          imgUrl: 'http://' + data.Location\r\n        })\r\n      })\r\n    },\r\n    beforeUpload(file) {\r\n      const types = ['image/jpeg', 'image/png']\r\n      //   console.log(file)\r\n      const ishas = types.includes(file.type)\r\n      if (!ishas) {\r\n        this.$message.error('只能上传' + types.join(',') + '类型的图片')\r\n        return false\r\n      }\r\n      //   if (!types.includes(item => item === file.type)) {\r\n      //     this.$message.error('只能上传' + types.join(',') + '类型的图片')\r\n      //     return false\r\n      //   }\r\n      const MaxSize = 1 * 1024 * 1024\r\n      if (file.size > MaxSize) {\r\n        this.$message.error('图片大小不能超过1M')\r\n        return false\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.styleUploadImg{\r\n    width: 148px;\r\n    height: 148px;\r\n    overflow: hidden;\r\n}\r\n</style>\r\n"]}]}