{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\src\\views\\setting\\components\\addSetpermissions.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\src\\views\\setting\\components\\addSetpermissions.vue","mtime":1665913430540},{"path":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\babel.config.js","mtime":1663904824000},{"path":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1661678001124},{"path":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\node_modules\\babel-loader\\lib\\index.js","mtime":1663928692628},{"path":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1661678001124},{"path":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\node_modules\\vue-loader\\lib\\index.js","mtime":1664288167520}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiQzovVXNlcnMvQWRtaW5pc3RyYXRvci9EZXNrdG9wL2hyc2FhcygxKS9ocnNhYXMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3JlZ2VuZXJhdG9yUnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJDOi9Vc2Vycy9BZG1pbmlzdHJhdG9yL0Rlc2t0b3AvaHJzYWFzKDEpL2hyc2Fhcy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IGdldHBlcm1pc3Npb25BcGkgfSBmcm9tICdAL2FwaS9wcnJtaXNzaW9uJzsKaW1wb3J0IHsgdHJhbkxpc3REZXBhciB9IGZyb20gJ0AvdXRpbHMvdHJhbkxpc3REZXBhcic7CmltcG9ydCB7IGdldHJvbGVzQXBpLCBzZXRyb2xlc0FwaSB9IGZyb20gJ0AvYXBpL3JvbGVzJzsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICBkaWFsb2dWaXNpYmxlOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGF0YTogW10sCiAgICAgIGRlZmF1bHRQcm9wczogewogICAgICAgIGxhYmVsOiAnbmFtZScKICAgICAgfSwKICAgICAgZGVmYXVsdENoYW5nZTogW10sCiAgICAgIHJvbGVJZDogJycKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5yZGNsb3NlOiBmdW5jdGlvbiBoYW5yZGNsb3NlKCkgewogICAgICB0aGlzLiRlbWl0KCd1cGRhdGU6ZGlhbG9nVmlzaWJsZScsIGZhbHNlKTsgLy8gICB0aGlzLmRlZmF1bHRDaGFuZ2UgPSBbXQogICAgfSwKICAgIG9QZW5idG46IGZ1bmN0aW9uIG9QZW5idG4oKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBkYXRhOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIGdldHBlcm1pc3Npb25BcGkoKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgZGF0YSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICAvLyAgIGNvbnNvbGUubG9nKGRhdGEpCiAgICAgICAgICAgICAgICBfdGhpcy5kYXRhID0gdHJhbkxpc3REZXBhcihkYXRhLCAnMCcpOyAvLyAgIGNvbnNvbGUubG9nKDEyMykKICAgICAgICAgICAgICAgIC8vICAgZ2V0cGVybWlzc2lvblJsZWlkKCkKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIC8vIOiOt+WPluW9k+WJjeinkuiJsuW3suacieeahOadg+mZkAogICAgZ2V0cGVybWlzc2lvblJsZWlkOiBmdW5jdGlvbiBnZXRwZXJtaXNzaW9uUmxlaWQoaWQpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgcmVzOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAvLyAgIGNvbnNvbGUubG9nKGlkKQogICAgICAgICAgICAgICAgX3RoaXMyLnJvbGVJZCA9IGlkOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGdldHJvbGVzQXBpKGlkKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICAvLyAgIGNvbnNvbGUubG9nKHJlcykKICAgICAgICAgICAgICAgIF90aGlzMi5kZWZhdWx0Q2hhbmdlID0gcmVzLnBlcm1JZHM7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHNldHJvbGVzQXBpQnRuOiBmdW5jdGlvbiBzZXRyb2xlc0FwaUJ0bigpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICB2YXIgcGVybUlkczsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgLy8gICBpZiAoIXRoaXMuZGVmYXVsdENoYW5nZS5sZW5ndGgpIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfliIbphY3mnYPpmZDkuI3og73kuLrnqbonKQogICAgICAgICAgICAgICAgLy8g6Iul6IqC54K55Y+v6KKr6YCJ5oup77yI5Y2zIHNob3ctY2hlY2tib3gg5Li6IHRydWXvvInvvIzliJnov5Tlm57nm67liY3ooqvpgInkuK3nmoToioLngrnnmoQga2V5IOaJgOe7hOaIkOeahOaVsOe7hAogICAgICAgICAgICAgICAgcGVybUlkcyA9IF90aGlzMy4kcmVmcy50cmVlLmdldENoZWNrZWRLZXlzKCk7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gc2V0cm9sZXNBcGkoewogICAgICAgICAgICAgICAgICBpZDogX3RoaXMzLnJvbGVJZCwKICAgICAgICAgICAgICAgICAgcGVybUlkczogcGVybUlkcwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIF90aGlzMy4kbWVzc2FnZS5zdWNjZXNzKCfliIbphY3miJDlip8nKTsKCiAgICAgICAgICAgICAgICBfdGhpczMuaGFucmRjbG9zZSgpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSkoKTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;AAiBA;AACA;AACA;AACA;EACAA;IACAC;MACAC,aADA;MAEAC;IAFA;EADA,CADA;EAOAC,IAPA,kBAOA;IACA;MACAA,QADA;MAEAC;QACAC;MADA,CAFA;MAKAC,iBALA;MAMAC;IANA;EAQA,CAhBA;EAiBAC;IACAC,UADA,wBACA;MACA,0CADA,CAEA;IACA,CAJA;IAKAC,OALA,qBAKA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OAEAC,kBAFA;;cAAA;gBAEAR,IAFA;gBAGA;gBACA,sCAJA,CAKA;gBACA;;cANA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAOA,CAZA;IAaA;IACAS,kBAdA,8BAcAC,EAdA,EAcA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA;gBACA;gBAFA;gBAAA,OAGAC,eAHA;;cAAA;gBAGAC,GAHA;gBAIA;gBACA;;cALA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAMA,CApBA;IAqBAC,cArBA,4BAqBA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA;gBACA;gBACAC,OAHA,GAGA,kCAHA;gBAAA;gBAAA,OAIAC;kBAAAL;kBAAAI;gBAAA,EAJA;;cAAA;gBAKA;;gBACA;;cANA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAOA;EA5BA;AAjBA","names":["props","dialogVisible","type","default","data","defaultProps","label","defaultChange","roleId","methods","hanrdclose","oPenbtn","getpermissionApi","getpermissionRleid","id","getrolesApi","res","setrolesApiBtn","permIds","setrolesApi"],"sourceRoot":"src/views/setting/components","sources":["addSetpermissions.vue"],"sourcesContent":["<template>\r\n  <el-dialog\r\n    title=\"提示\"\r\n    :visible=\"dialogVisible\"\r\n    width=\"50%\"\r\n    @open=\"oPenbtn\"\r\n    @close=\"hanrdclose\"\r\n  >\r\n    <el-tree ref=\"tree\" node-key=\"id\" :default-checked-keys=\"defaultChange\" :data=\"data\" show-checkbox default-expand-all :props=\"defaultProps\" />\r\n    <span slot=\"footer\" class=\"dialog-footer\">\r\n      <el-button @click=\"$emit('update:dialogVisible',false)\">取 消</el-button>\r\n      <el-button type=\"primary\" @click=\"setrolesApiBtn\">确 定</el-button>\r\n    </span>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport { getpermissionApi } from '@/api/prrmission'\r\nimport { tranListDepar } from '@/utils/tranListDepar'\r\nimport { getrolesApi, setrolesApi } from '@/api/roles'\r\nexport default {\r\n  props: {\r\n    dialogVisible: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      data: [],\r\n      defaultProps: {\r\n        label: 'name'\r\n      },\r\n      defaultChange: [],\r\n      roleId: ''\r\n    }\r\n  },\r\n  methods: {\r\n    hanrdclose() {\r\n      this.$emit('update:dialogVisible', false)\r\n    //   this.defaultChange = []\r\n    },\r\n    async oPenbtn() {\r\n      // 获取所有权限列表\r\n      const data = await getpermissionApi()\r\n      //   console.log(data)\r\n      this.data = tranListDepar(data, '0')\r\n      //   console.log(123)\r\n    //   getpermissionRleid()\r\n    },\r\n    // 获取当前角色已有的权限\r\n    async getpermissionRleid(id) {\r\n    //   console.log(id)\r\n      this.roleId = id\r\n      const res = await getrolesApi(id)\r\n      //   console.log(res)\r\n      this.defaultChange = res.permIds\r\n    },\r\n    async setrolesApiBtn() {\r\n    //   if (!this.defaultChange.length) return this.$message.error('分配权限不能为空')\r\n    // 若节点可被选择（即 show-checkbox 为 true），则返回目前被选中的节点的 key 所组成的数组\r\n      const permIds = this.$refs.tree.getCheckedKeys()\r\n      await setrolesApi({ id: this.roleId, permIds })\r\n      this.$message.success('分配成功')\r\n      this.hanrdclose()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n"]}]}