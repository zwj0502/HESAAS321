{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\src\\utils\\request.js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\src\\utils\\request.js","mtime":1664262003493},{"path":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\babel.config.js","mtime":1663904824000},{"path":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1661678001124},{"path":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\node_modules\\babel-loader\\lib\\index.js","mtime":1663928692628},{"path":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\node_modules\\eslint-loader\\index.js","mtime":1661678032878}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5lcnJvci5jYXVzZS5qcyI7Ci8vIOWunueOsOWvuVxkb2NzXHJ1bGVzXHNwYWNlZC1jb21tZW50YXhpb3MKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHsgTWVzc2FnZSB9IGZyb20gJ2VsZW1lbnQtdWknOwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZSc7CmltcG9ydCByb3V0ZXIgZnJvbSAnQC9yb3V0ZXInOwp2YXIgVGltZU91dCA9IDM2MDA7CgpmdW5jdGlvbiBJc0NoZWNrVGltZU91dCgpIHsKICB2YXIgY3VycmVudFRpbWUgPSBEYXRlLm5vdygpOwogIHZhciB0aW1lU3RhbXAgPSAoY3VycmVudFRpbWUgLSBzdG9yZS5nZXR0ZXJzLmhlcmF0ZVRpbWUpIC8gMTAwMDsKICByZXR1cm4gdGltZVN0YW1wID4gVGltZU91dDsKfQoKdmFyIHNlcnZpY2UgPSBheGlvcy5jcmVhdGUoewogIGJhc2VVUkw6IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9BUEksCiAgdGltZW91dDogNTAwMAp9KTsKc2VydmljZS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIC8vIOWcqOi/meS4quS9jee9rumcgOimgee7n+S4gOeahOWOu+azqOWFpXRva2VuCiAgaWYgKHN0b3JlLmdldHRlcnMudG9rZW4pIHsKICAgIGlmIChJc0NoZWNrVGltZU91dCgpKSB7CiAgICAgIHN0b3JlLmRpc3BhdGNoKCd1c2VyL2xvZ291dCcpOwogICAgICByb3V0ZXIucHVzaCgnL2xvZ2luJyk7CiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ3Rva2VuIOi2heaXticpKTsKICAgIH0gLy8g5aaC5p6cdG9rZW7lrZjlnKgg5rOo5YWldG9rZW4KCgogICAgY29uZmlnLmhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9ICJCZWFyZXIgIi5jb25jYXQoc3RvcmUuZ2V0dGVycy50b2tlbik7CiAgfQoKICByZXR1cm4gY29uZmlnOyAvLyDlv4Xpobvov5Tlm57phY3nva4KfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7IC8vIOWTjeW6lOaLpuaIquWZqAoKc2VydmljZS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSkgewogIC8vIGF4aW9z6buY6K6k5Yqg5LqG5LiA5bGCZGF0YQogIHZhciBfcmVzcG9uc2UkZGF0YSA9IHJlc3BvbnNlLmRhdGEsCiAgICAgIHN1Y2Nlc3MgPSBfcmVzcG9uc2UkZGF0YS5zdWNjZXNzLAogICAgICBtZXNzYWdlID0gX3Jlc3BvbnNlJGRhdGEubWVzc2FnZSwKICAgICAgZGF0YSA9IF9yZXNwb25zZSRkYXRhLmRhdGE7IC8vICAg6KaB5qC55o2uc3VjY2Vzc+eahOaIkOWKn+S4juWQpuWGs+WumuS4i+mdoueahOaTjeS9nAoKICBpZiAoc3VjY2VzcykgewogICAgcmV0dXJuIGRhdGE7CiAgfSBlbHNlIHsKICAgIC8vIOS4muWKoeW3sue7j+mUmeivr+S6hiDov5jog73ov5t0aGVuID8g5LiN6IO9IO+8gSDlupTor6Xov5tjYXRjaAogICAgTWVzc2FnZS5lcnJvcihtZXNzYWdlKTsgLy8g5o+Q56S66ZSZ6K+v5raI5oGvCgogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihtZXNzYWdlKSk7CiAgfQp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICBpZiAoZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHsKICAgIHN0b3JlLmRpc3BhdGNoKCd1c2VyL2xvZ291dCcpOwogICAgcm91dGVyLnB1c2goJy9sb2dpbicpOwogICAgTWVzc2FnZS5lcnJvcigndG9rZW4g6LaF5pe2Jyk7CiAgfSBlbHNlIHsKICAgIE1lc3NhZ2UuZXJyb3IoZXJyb3IubWVzc2FnZSk7IC8vIOaPkOekuumUmeivr+S/oeaBrwogIH0KCiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsgLy8g6L+U5Zue5omn6KGM6ZSZ6K+vIOiuqeW9k+WJjeeahOaJp+ihjOmTvui3s+WHuuaIkOWKnyDnm7TmjqXov5vlhaUgY2F0Y2gKfSk7CmV4cG9ydCBkZWZhdWx0IHNlcnZpY2U7"},{"version":3,"names":["axios","Message","store","router","TimeOut","IsCheckTimeOut","currentTime","Date","now","timeStamp","getters","herateTime","service","create","baseURL","process","env","VUE_APP_BASE_API","timeout","interceptors","request","use","config","token","dispatch","push","Promise","reject","Error","headers","error","response","data","success","message","status"],"sources":["C:/Users/Administrator/Desktop/hrsaas(1)/hrsaas/src/utils/request.js"],"sourcesContent":["// 实现对\\docs\\rules\\spaced-commentaxios\r\nimport axios from 'axios'\r\nimport { Message } from 'element-ui'\r\nimport store from '@/store'\r\nimport router from '@/router'\r\nconst TimeOut = 3600\r\nfunction IsCheckTimeOut() {\r\n  const currentTime = Date.now()\r\n  const timeStamp = (currentTime - store.getters.herateTime) / 1000\r\n  return timeStamp > TimeOut\r\n}\r\nconst service = axios.create({\r\n  baseURL: process.env.VUE_APP_BASE_API,\r\n  timeout: 5000\r\n})\r\nservice.interceptors.request.use(config => {\r\n  // 在这个位置需要统一的去注入token\r\n  if (store.getters.token) {\r\n    if (IsCheckTimeOut()) {\r\n      store.dispatch('user/logout')\r\n      router.push('/login')\r\n      return Promise.reject(new Error('token 超时'))\r\n    }\r\n    // 如果token存在 注入token\r\n    config.headers['Authorization'] = `Bearer ${store.getters.token}`\r\n  }\r\n  return config // 必须返回配置\r\n}, error => {\r\n  return Promise.reject(error)\r\n})\r\n// 响应拦截器\r\nservice.interceptors.response.use(response => {\r\n  // axios默认加了一层data\r\n  const { success, message, data } = response.data\r\n  //   要根据success的成功与否决定下面的操作\r\n  if (success) {\r\n    return data\r\n  } else {\r\n    // 业务已经错误了 还能进then ? 不能 ！ 应该进catch\r\n    Message.error(message) // 提示错误消息\r\n    return Promise.reject(new Error(message))\r\n  }\r\n}, error => {\r\n  if (error.response.status === 401) {\r\n    store.dispatch('user/logout')\r\n    router.push('/login')\r\n    Message.error('token 超时')\r\n  } else {\r\n    Message.error(error.message) // 提示错误信息\r\n  }\r\n  return Promise.reject(error) // 返回执行错误 让当前的执行链跳出成功 直接进入 catch\r\n})\r\nexport default service\r\n"],"mappings":";;;AAAA;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,YAAxB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,IAAMC,OAAO,GAAG,IAAhB;;AACA,SAASC,cAAT,GAA0B;EACxB,IAAMC,WAAW,GAAGC,IAAI,CAACC,GAAL,EAApB;EACA,IAAMC,SAAS,GAAG,CAACH,WAAW,GAAGJ,KAAK,CAACQ,OAAN,CAAcC,UAA7B,IAA2C,IAA7D;EACA,OAAOF,SAAS,GAAGL,OAAnB;AACD;;AACD,IAAMQ,OAAO,GAAGZ,KAAK,CAACa,MAAN,CAAa;EAC3BC,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,gBADM;EAE3BC,OAAO,EAAE;AAFkB,CAAb,CAAhB;AAIAN,OAAO,CAACO,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CAAiC,UAAAC,MAAM,EAAI;EACzC;EACA,IAAIpB,KAAK,CAACQ,OAAN,CAAca,KAAlB,EAAyB;IACvB,IAAIlB,cAAc,EAAlB,EAAsB;MACpBH,KAAK,CAACsB,QAAN,CAAe,aAAf;MACArB,MAAM,CAACsB,IAAP,CAAY,QAAZ;MACA,OAAOC,OAAO,CAACC,MAAR,CAAe,IAAIC,KAAJ,CAAU,UAAV,CAAf,CAAP;IACD,CALsB,CAMvB;;;IACAN,MAAM,CAACO,OAAP,CAAe,eAAf,qBAA4C3B,KAAK,CAACQ,OAAN,CAAca,KAA1D;EACD;;EACD,OAAOD,MAAP,CAXyC,CAW3B;AACf,CAZD,EAYG,UAAAQ,KAAK,EAAI;EACV,OAAOJ,OAAO,CAACC,MAAR,CAAeG,KAAf,CAAP;AACD,CAdD,E,CAeA;;AACAlB,OAAO,CAACO,YAAR,CAAqBY,QAArB,CAA8BV,GAA9B,CAAkC,UAAAU,QAAQ,EAAI;EAC5C;EACA,qBAAmCA,QAAQ,CAACC,IAA5C;EAAA,IAAQC,OAAR,kBAAQA,OAAR;EAAA,IAAiBC,OAAjB,kBAAiBA,OAAjB;EAAA,IAA0BF,IAA1B,kBAA0BA,IAA1B,CAF4C,CAG5C;;EACA,IAAIC,OAAJ,EAAa;IACX,OAAOD,IAAP;EACD,CAFD,MAEO;IACL;IACA/B,OAAO,CAAC6B,KAAR,CAAcI,OAAd,EAFK,CAEkB;;IACvB,OAAOR,OAAO,CAACC,MAAR,CAAe,IAAIC,KAAJ,CAAUM,OAAV,CAAf,CAAP;EACD;AACF,CAXD,EAWG,UAAAJ,KAAK,EAAI;EACV,IAAIA,KAAK,CAACC,QAAN,CAAeI,MAAf,KAA0B,GAA9B,EAAmC;IACjCjC,KAAK,CAACsB,QAAN,CAAe,aAAf;IACArB,MAAM,CAACsB,IAAP,CAAY,QAAZ;IACAxB,OAAO,CAAC6B,KAAR,CAAc,UAAd;EACD,CAJD,MAIO;IACL7B,OAAO,CAAC6B,KAAR,CAAcA,KAAK,CAACI,OAApB,EADK,CACwB;EAC9B;;EACD,OAAOR,OAAO,CAACC,MAAR,CAAeG,KAAf,CAAP,CARU,CAQmB;AAC9B,CApBD;AAqBA,eAAelB,OAAf"}]}