{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\src\\views\\import\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\src\\views\\import\\index.vue","mtime":1665391624134},{"path":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1661678001124},{"path":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\node_modules\\babel-loader\\lib\\index.js","mtime":1663928692628},{"path":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1661678001124},{"path":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\node_modules\\vue-loader\\lib\\index.js","mtime":1664288167520}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgVXBsb2FkRXhjZWwgZnJvbSAnQC9jb21wb25lbnRzL1VwbG9hZEV4Y2VsJw0KaW1wb3J0IHsgaW1wb3J0RW1wbG95ZWUgfSBmcm9tICdAL2FwaS9lbXBsb3llZXMnDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdIcnNhYXNJbmRleCcsDQogIGNvbXBvbmVudHM6IHsNCiAgICBVcGxvYWRFeGNlbA0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQoNCiAgICB9DQogIH0sDQogIC8vIGhlYWRlciAgWyfmiYvmnLrlj7cnLCAn5aeT5ZCNJywgJ+WFpeiBjOaXpeacnycsICfovazmraPml6XmnJ8nLCAn5bel5Y+3J10NCiAgLy8gcmVzdWx0cyAgW3sgJ+WFpeiBjOaXpeacnyc6IDQzNjc4LCAn5aeT5ZCNJzogJ+mrmOWkp+WxsScsICflt6Xlj7cnOiAyMDA4OSwgJ+aJi+acuuWPtyc6IDEzMDQxMTMxODc5LCAn6L2s5q2j5pel5pyfJzogNDM2NzggfV0NCg0KICAvLyDlkI7nq6/mjqXlj6PopoHnmoTmlbDmja7vvJpbeyAndGltZU9mRW50cnknOiA0MzY3OCwgJ3VzZXJuYW1lJzogJ+mrmOWkp+WxsScsICd3b3JrTnVtYmVyJzogMjAwODksICdtb2JpbGUnOiAxMzA0MTEzMTg3OSwgJ2NvcnJlY3Rpb25UaW1lJzogNDM2NzggfV0NCg0KICAvLyDlrp7njrDmibnph4/mlrDlop7lkZjlt6UNCiAgbWV0aG9kczogew0KICAgIGFzeW5jICBoYW5kbGVTdWNjZXNzKHsgaGVhZGVyLCByZXN1bHRzIH0pIHsNCiAgICAgIC8vIGNvbnNvbGUubG9nKGhlYWRlciwgcmVzdWx0cykNCiAgICAgIGNvbnN0IHVzZXJSZWxhdGlvbnMgPSB7DQogICAgICAgICflhaXogYzml6XmnJ8nOiAndGltZU9mRW50cnknLA0KICAgICAgICAn5omL5py65Y+3JzogJ21vYmlsZScsDQogICAgICAgICflp5PlkI0nOiAndXNlcm5hbWUnLA0KICAgICAgICAn6L2s5q2j5pel5pyfJzogJ2NvcnJlY3Rpb25UaW1lJywNCiAgICAgICAgJ+W3peWPtyc6ICd3b3JrTnVtYmVyJw0KICAgICAgfQ0KDQogICAgICBjb25zdCBhcnIgPSBbXQ0KICAgICAgYXdhaXQgcmVzdWx0cy5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAvLyBjb25zb2xlLmxvZyhpdGVtKSAvLyB7ICflhaXogYzml6XmnJ8nOiA0MzY3OCwgJ+Wnk+WQjSc6ICfpq5jlpKflsbEnLCAn5bel5Y+3JzogMjAwODksICfmiYvmnLrlj7cnOiAxMzA0MTEzMTg3OSwgJ+i9rOato+aXpeacnyc6IDQzNjc4IH0NCiAgICAgICAgY29uc3QgdXNlcmluZm8gPSB7fQ0KICAgICAgICAvLyAgT2JqZWN0LmtleXMoaXRlbSkgLy8gWyflhaXogYzml6XmnJ8nLCAn5aeT5ZCNJywgJ+W3peWPtycsJ+aJi+acuuWPtycsICBdDQogICAgICAgIE9iamVjdC5rZXlzKGl0ZW0pLmZvckVhY2goa2V5ID0+IHsNCiAgICAgICAgICAvLyBrZXkg5Lit5paHDQogICAgICAgICAgLy8gdXNlclJlbGF0aW9uc1trZXldIOiLseaWhw0KICAgICAgICAgIC8vIHVzZXJpbmZvLnRpbWVPZkVudHJ5DQogICAgICAgICAgLy8ga2V5IOWvueW6lOeahOWAvCBpdGVtW2tleV0NCiAgICAgICAgICB1c2VyaW5mb1t1c2VyUmVsYXRpb25zW2tleV1dID0gaXRlbVtrZXldDQogICAgICAgIH0pDQogICAgICAgIGFyci5wdXNoKHVzZXJpbmZvKQ0KICAgICAgfSkNCiAgICAgIGNvbnNvbGUubG9nKGFycikNCiAgICAgIGF3YWl0IGltcG9ydEVtcGxveWVlKGFycikNCiAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5a+85YWl5oiQ5YqfJykNCiAgICAgIHRoaXMuJHJvdXRlci5iYWNrKCkNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/import","sourcesContent":["<template>\r\n  <div>\r\n    <UploadExcel :on-success=\"handleSuccess\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport UploadExcel from '@/components/UploadExcel'\r\nimport { importEmployee } from '@/api/employees'\r\nexport default {\r\n  name: 'HrsaasIndex',\r\n  components: {\r\n    UploadExcel\r\n  },\r\n  data() {\r\n    return {\r\n\r\n    }\r\n  },\r\n  // header  ['手机号', '姓名', '入职日期', '转正日期', '工号']\r\n  // results  [{ '入职日期': 43678, '姓名': '高大山', '工号': 20089, '手机号': 13041131879, '转正日期': 43678 }]\r\n\r\n  // 后端接口要的数据：[{ 'timeOfEntry': 43678, 'username': '高大山', 'workNumber': 20089, 'mobile': 13041131879, 'correctionTime': 43678 }]\r\n\r\n  // 实现批量新增员工\r\n  methods: {\r\n    async  handleSuccess({ header, results }) {\r\n      // console.log(header, results)\r\n      const userRelations = {\r\n        '入职日期': 'timeOfEntry',\r\n        '手机号': 'mobile',\r\n        '姓名': 'username',\r\n        '转正日期': 'correctionTime',\r\n        '工号': 'workNumber'\r\n      }\r\n\r\n      const arr = []\r\n      await results.forEach(item => {\r\n        // console.log(item) // { '入职日期': 43678, '姓名': '高大山', '工号': 20089, '手机号': 13041131879, '转正日期': 43678 }\r\n        const userinfo = {}\r\n        //  Object.keys(item) // ['入职日期', '姓名', '工号','手机号',  ]\r\n        Object.keys(item).forEach(key => {\r\n          // key 中文\r\n          // userRelations[key] 英文\r\n          // userinfo.timeOfEntry\r\n          // key 对应的值 item[key]\r\n          userinfo[userRelations[key]] = item[key]\r\n        })\r\n        arr.push(userinfo)\r\n      })\r\n      console.log(arr)\r\n      await importEmployee(arr)\r\n      this.$message.success('导入成功')\r\n      this.$router.back()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n  <style lang=\"scss\" scoped>\r\n\r\n  </style>\r\n"]}]}