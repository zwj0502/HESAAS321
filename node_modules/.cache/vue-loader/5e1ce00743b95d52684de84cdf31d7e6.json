{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\src\\views\\setting\\components\\addSetpermissions.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\src\\views\\setting\\components\\addSetpermissions.vue","mtime":1665913430540},{"path":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1661678001124},{"path":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\node_modules\\babel-loader\\lib\\index.js","mtime":1663928692628},{"path":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1661678001124},{"path":"C:\\Users\\Administrator\\Desktop\\hrsaas(1)\\hrsaas\\node_modules\\vue-loader\\lib\\index.js","mtime":1664288167520}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBnZXRwZXJtaXNzaW9uQXBpIH0gZnJvbSAnQC9hcGkvcHJybWlzc2lvbicNCmltcG9ydCB7IHRyYW5MaXN0RGVwYXIgfSBmcm9tICdAL3V0aWxzL3RyYW5MaXN0RGVwYXInDQppbXBvcnQgeyBnZXRyb2xlc0FwaSwgc2V0cm9sZXNBcGkgfSBmcm9tICdAL2FwaS9yb2xlcycNCmV4cG9ydCBkZWZhdWx0IHsNCiAgcHJvcHM6IHsNCiAgICBkaWFsb2dWaXNpYmxlOiB7DQogICAgICB0eXBlOiBCb29sZWFuLA0KICAgICAgZGVmYXVsdDogZmFsc2UNCiAgICB9DQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGRhdGE6IFtdLA0KICAgICAgZGVmYXVsdFByb3BzOiB7DQogICAgICAgIGxhYmVsOiAnbmFtZScNCiAgICAgIH0sDQogICAgICBkZWZhdWx0Q2hhbmdlOiBbXSwNCiAgICAgIHJvbGVJZDogJycNCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBoYW5yZGNsb3NlKCkgew0KICAgICAgdGhpcy4kZW1pdCgndXBkYXRlOmRpYWxvZ1Zpc2libGUnLCBmYWxzZSkNCiAgICAvLyAgIHRoaXMuZGVmYXVsdENoYW5nZSA9IFtdDQogICAgfSwNCiAgICBhc3luYyBvUGVuYnRuKCkgew0KICAgICAgLy8g6I635Y+W5omA5pyJ5p2D6ZmQ5YiX6KGoDQogICAgICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0cGVybWlzc2lvbkFwaSgpDQogICAgICAvLyAgIGNvbnNvbGUubG9nKGRhdGEpDQogICAgICB0aGlzLmRhdGEgPSB0cmFuTGlzdERlcGFyKGRhdGEsICcwJykNCiAgICAgIC8vICAgY29uc29sZS5sb2coMTIzKQ0KICAgIC8vICAgZ2V0cGVybWlzc2lvblJsZWlkKCkNCiAgICB9LA0KICAgIC8vIOiOt+WPluW9k+WJjeinkuiJsuW3suacieeahOadg+mZkA0KICAgIGFzeW5jIGdldHBlcm1pc3Npb25SbGVpZChpZCkgew0KICAgIC8vICAgY29uc29sZS5sb2coaWQpDQogICAgICB0aGlzLnJvbGVJZCA9IGlkDQogICAgICBjb25zdCByZXMgPSBhd2FpdCBnZXRyb2xlc0FwaShpZCkNCiAgICAgIC8vICAgY29uc29sZS5sb2cocmVzKQ0KICAgICAgdGhpcy5kZWZhdWx0Q2hhbmdlID0gcmVzLnBlcm1JZHMNCiAgICB9LA0KICAgIGFzeW5jIHNldHJvbGVzQXBpQnRuKCkgew0KICAgIC8vICAgaWYgKCF0aGlzLmRlZmF1bHRDaGFuZ2UubGVuZ3RoKSByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcign5YiG6YWN5p2D6ZmQ5LiN6IO95Li656m6JykNCiAgICAvLyDoi6XoioLngrnlj6/ooqvpgInmi6nvvIjljbMgc2hvdy1jaGVja2JveCDkuLogdHJ1Ze+8ie+8jOWImei/lOWbnuebruWJjeiiq+mAieS4reeahOiKgueCueeahCBrZXkg5omA57uE5oiQ55qE5pWw57uEDQogICAgICBjb25zdCBwZXJtSWRzID0gdGhpcy4kcmVmcy50cmVlLmdldENoZWNrZWRLZXlzKCkNCiAgICAgIGF3YWl0IHNldHJvbGVzQXBpKHsgaWQ6IHRoaXMucm9sZUlkLCBwZXJtSWRzIH0pDQogICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+WIhumFjeaIkOWKnycpDQogICAgICB0aGlzLmhhbnJkY2xvc2UoKQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["addSetpermissions.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAiBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"addSetpermissions.vue","sourceRoot":"src/views/setting/components","sourcesContent":["<template>\r\n  <el-dialog\r\n    title=\"提示\"\r\n    :visible=\"dialogVisible\"\r\n    width=\"50%\"\r\n    @open=\"oPenbtn\"\r\n    @close=\"hanrdclose\"\r\n  >\r\n    <el-tree ref=\"tree\" node-key=\"id\" :default-checked-keys=\"defaultChange\" :data=\"data\" show-checkbox default-expand-all :props=\"defaultProps\" />\r\n    <span slot=\"footer\" class=\"dialog-footer\">\r\n      <el-button @click=\"$emit('update:dialogVisible',false)\">取 消</el-button>\r\n      <el-button type=\"primary\" @click=\"setrolesApiBtn\">确 定</el-button>\r\n    </span>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport { getpermissionApi } from '@/api/prrmission'\r\nimport { tranListDepar } from '@/utils/tranListDepar'\r\nimport { getrolesApi, setrolesApi } from '@/api/roles'\r\nexport default {\r\n  props: {\r\n    dialogVisible: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      data: [],\r\n      defaultProps: {\r\n        label: 'name'\r\n      },\r\n      defaultChange: [],\r\n      roleId: ''\r\n    }\r\n  },\r\n  methods: {\r\n    hanrdclose() {\r\n      this.$emit('update:dialogVisible', false)\r\n    //   this.defaultChange = []\r\n    },\r\n    async oPenbtn() {\r\n      // 获取所有权限列表\r\n      const data = await getpermissionApi()\r\n      //   console.log(data)\r\n      this.data = tranListDepar(data, '0')\r\n      //   console.log(123)\r\n    //   getpermissionRleid()\r\n    },\r\n    // 获取当前角色已有的权限\r\n    async getpermissionRleid(id) {\r\n    //   console.log(id)\r\n      this.roleId = id\r\n      const res = await getrolesApi(id)\r\n      //   console.log(res)\r\n      this.defaultChange = res.permIds\r\n    },\r\n    async setrolesApiBtn() {\r\n    //   if (!this.defaultChange.length) return this.$message.error('分配权限不能为空')\r\n    // 若节点可被选择（即 show-checkbox 为 true），则返回目前被选中的节点的 key 所组成的数组\r\n      const permIds = this.$refs.tree.getCheckedKeys()\r\n      await setrolesApi({ id: this.roleId, permIds })\r\n      this.$message.success('分配成功')\r\n      this.hanrdclose()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n"]}]}